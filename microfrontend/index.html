<!DOCTYPE html>
<html lang="nb" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Microfrontend - Min side utvikler-docs</title>
<link href="../styles/styles.css" rel="stylesheet">
<link href="../styles/navbar.css" rel="stylesheet">
<link href="../styles/page-content.css" rel="stylesheet">
<link href="../styles/toc.css" rel="stylesheet">
<link href="../styles/search-modal.css" rel="stylesheet">
<link href="../styles/footer.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
<a href=".." class="nav-homepage">
    <svg class="nav-homepage-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"
        fill="none">
        <circle class="outerCircle" cx="14" cy="14" r="13.25" stroke="black" stroke-width="1.5" />
        <circle class="innerCircle" cx="14" cy="14" r="7.25" stroke="black" stroke-width="1.5" />
        <circle cx="9" cy="10" r="2.25" fill="white" stroke="black" stroke-width="1.5" />
    </svg>
    <p>
        Utvikler-docs
    </p>
</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
<!-- Main navigation -->
<div class¨>
    <ul class="nav navbar-nav">
        <li class="navitem">
            <a href="../guide/" class="nav-link">Innholdsguide</a>
        </li>
        <li class="navitem">
            <a href="../utkast/" class="nav-link">Utkast</a>
        </li>
        <li class="navitem active">
            <a href="./" class="nav-link">Microfrontend</a>
        </li>
        <li class="dropdown">
            <a href="../varsler/" class="nav-link">Varsler <b class="caret"></b></a>
        </li>
        <li class="navitem">
            <a href="../soknadskvittering/" class="nav-link">Søknadskvittering (WIP)</a>
        </li>
        <li class="nav-item">
            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                Søk
            </a>
        </li>
    </ul>
</div>

                    <ul class="nav navbar-nav ms-md-auto">
        <li class="nav-item">
            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                Søk
            </a>
        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
<div class="content-wrapper">
    <div class="page-content" role="main">

<h1 id="microfrontends-pa-min-side">Microfrontends på min side</h1>
<p>Personalisering med microfrontends.</p>
<p>Microfrontendene brukt på min side kommer i form av små bokser med forskjellig funksjonalitet og innhold teamene ønsker å presentere til en spesifikk gruppe brukere. Det overordnede konseptet er at bruker skal finne igjen mye av sitt mest relevante innhold og av innganger gruppert og løftet på min side.</p>
<p>Vår microfrontendrigg består av tre deler. Mikrofrontenden som lastes opp til frontend-plattform sin CDN, min side som viser microfrontendene, og Kafka-backenden for å aktivere og deaktivere mikrofrontends for spesifikke brukere. Om Kafka ikke er et alternativ for ditt team, finnes det ett regelbasert alternativ som bruker informasjon fra SAF og/eller PDL til å avgjøre hvorvidt en mikrofrontend skal vises. Her er det mulig for ditt team å legge inn forslag til ønsket regel, ta kontakt med team min side for mer info.<br />
Selve mikrofrontenden blir bygget til ESM, lastet opp til CDN og hentes deretter inn som en remote ES-Modul.</p>
<h2 id="sett-opp-microfrontend">Sett opp microfrontend</h2>
<p>Bruk <a href="https://github.com/navikt/tms-microfrontend-template">denne</a> templaten og følg instruksjonene i readme-filen.</p>
<h3 id="design">Design</h3>
<p>Vi stiller visse <a href="https://aksel.nav.no/god-praksis/artikler/retningslinjer-for-design-av-mikrofrontends">designkrav</a> til utformingen av microfrontendene, for å ivareta en god helhetlig brukeropplevelse.</p>
<h3 id="sprak">Språk</h3>
<p>Alt innhold må være tilgjengelig på bokmål, nynorsk og engelsk. Språkhåndtering har vi allerede satt opp <a href="https://github.com/navikt/tms-microfrontend-template/blob/main/src/language/LanguageProvider.tsx">her</a>.</p>
<h3 id="dependencies">Dependencies</h3>
<p>Vi deler noen dependencies på tvers av apper. Per nå er det react og react-dom. DS-css blir også delt og bør ligge på samme major versjon. Veilendende versjon ligger <a href="https://github.com/navikt/tms-min-side/blob/main/index.html">her</a>.</p>
<h3 id="amplitude">Amplitude</h3>
<p>Amplitude fungerer som vanlig (se <a href="https://github.com/navikt/aap-min-side-microfrontend/blob/main/src/utils/amplitude.ts">AAP sin mikrofrontend</a>). Dere kan fritt logge de eventene dere vil, men for at vi skal kunne foreta målinger for Min side som helhet er det påkrevd at trykk på mikrofrontenden sender et navigere event med feltet <br />
<code>komponent: &lt;microfrontendId&gt;</code>.</p>
<p>Videre anbefaler vi å følge <a href="https://github.com/navikt/analytics-taxonomy">taksonominen</a> i NAV.</p>
<h2 id="toggle-pa-microfrontend">Toggle på microfrontend</h2>
<ol>
<li>Koble på <a href="https://github.com/navikt/min-side-microfrontend-topic-iac">min-side-microfrontend-topicet</a> ("microfrontendId" skal samsvare med navnet på frontendrepoet).</li>
<li>Du kan nå sende oss Enable/Disable meldinger via Kafka for å skru av og på microfrontenden for spesifikke brukere</li>
</ol>
<h3 id="enabledisable">Enable/disable</h3>
<p>Om en microfrontend vises avhenger av om den er enablet for en gitt bruker. Dette setter du ved å sende en melding på<br />
  microfrontend-topicet.</p>
<h3 id="enable-melding">Enable-melding</h3>
<p>Enable-melding sender du for å vise microfrontenden til en bruker.</p>
<pre><code class="language-json">{
    &quot;@action&quot;: &quot;enable&quot;,
    &quot;ident&quot;: &lt;ident for bruker: fnr/dnr&gt;,
    &quot;microfrontend_id&quot;: &lt;microfrontendId&gt;,
    &quot;sensitivitet&quot;: &lt;nivå som kreves for å se innholdet i mikrofrontenden, gyldige verdier: substantial og high&gt;,
    &quot;@initiated_by&quot;: &lt;ditt-team&gt;
}
</code></pre>
<h3 id="disable-melding">Disable-melding</h3>
<p>Disable-melding sender du for å slutte å vise microfrontenden til en bruker.</p>
<pre><code class="language-json">{
    &quot;@action&quot;:  &quot;disable&quot;,
    &quot;ident&quot;: &lt;ident for bruker: fnr/dnr&gt;,
    &quot;microfrontend_id&quot;: &lt;microfrontendId&gt;,
    &quot;@initiated_by&quot;:&lt;ditt-team&gt;
}
</code></pre>
<h3 id="meldingsbygger-bibliotek">Meldingsbygger-bibliotek</h3>
<p>Det er tilgjengelig på <a href="https://github.com/navikt/tms-mikrofrontend-selector/packages/1875650">github packages</a></p>
<h3 id="hva-er-sensitivitet">Hva er sensitivitet?</h3>
<p>Feltet <code>sensitivitet</code> i enablemeldingen korresponderer direkte til<br />
de <a href="https://docs.digdir.no/docs/idporten/oidc/oidc_protocol_id_token#acr-values">nye acr-veridene</a> i IDporten token.</p>
<ul>
<li>Om informasjonen som vises krever <code>idporten-loa-high</code> innlogging skal <code>sensitivitet</code> settes til <code>high</code>. </li>
<li>Om informasjonen kan vises uavhengig av innloggingsnivå skal <code>sensitivitet</code> settes til <code>substantial</code>.</li>
</ul>
<p>Om sensitivitet ikke er spesifisert i kafka-meldingen settes det alltid til <code>high</code> hos oss.<br />
Om en person logger inn med <code>idporten-loa-substantial</code> og det finnes mikrofrontender som personen kan se<br />
på <code>idporten-loa-high</code> vil bruker få beskjed om dette og link til en "stepup"<br />
login. Se også <a href="https://docs.nais.io/security/auth/idporten/#security-levels">NAIS docs</a> for mer info om acr-verdiene</p>
<h2 id="plassering">Plassering</h2>
<p>Mikrofrontender fra team plaseres enten under seksjonen "Din oversikt", på toppen under varslene, eller nederst under "Kanskje aktuelt for deg"</p>
<h3 id="din-oversikt">Din oversikt</h3>
<p>I din oversikt skal bruker få spesifikk informasjon knyttet til hens forhold til NAV. Din oversikt støtter for øyeblikket kun kafkabaserte mikrofrontends.</p>
<h4 id="produktkort">Produktkort</h4>
<p>Produktkort er strengt talt ikke mikrofrontender, men regelbaserte lenker som peker til innloggede produktsider for ett område. Vi anbefaler heller å bruke kafka, siden dette er mer treffsikkert i forhold til brukers situasjon, men hvis kafka ikke er en mulighet kan dette være ett alternativ. </p>
<h3 id="kanskje-aktuelt-for-deg">Kanskje aktuelt for deg</h3>
<p>Under kanskje aktuelt for deg skal bruker få forslag til annet innhold som kan være relevant for hen, for eksempel andre stønader eller støttetjenester en bruker kan ha rett på gitt at hen har en spesifikk ytelse. Foreløbig er det kun regelbaserte mikrofrontender som vises i den her seksjonen.</p></div>
    
    <div class="page-content-toc"><div class="bs-sidebar custom-toc" role="complementary">
  <h2>Innhold på siden</h2>
   
  <ul class="toc-list-depth-1">
    <li class="toc-item toc-item-depth-1">
      <a
      href="#microfrontends-pa-min-side"
      class="nav-link"
      >Microfrontends på min side</a
    >
    </li> 
  <ul class="toc-list-depth-2">
    <li class="toc-item toc-item-depth-2">
      <a
      href="#sett-opp-microfrontend"
      class="nav-link"
      >Sett opp microfrontend</a
    >
    </li> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#design"
      class="nav-link"
      >Design</a
    >
    </li>
  </ul> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#sprak"
      class="nav-link"
      >Språk</a
    >
    </li>
  </ul> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#dependencies"
      class="nav-link"
      >Dependencies</a
    >
    </li>
  </ul> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#amplitude"
      class="nav-link"
      >Amplitude</a
    >
    </li>
  </ul>
  </ul> 
  <ul class="toc-list-depth-2">
    <li class="toc-item toc-item-depth-2">
      <a
      href="#toggle-pa-microfrontend"
      class="nav-link"
      >Toggle på microfrontend</a
    >
    </li> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#enabledisable"
      class="nav-link"
      >Enable/disable</a
    >
    </li>
  </ul> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#enable-melding"
      class="nav-link"
      >Enable-melding</a
    >
    </li>
  </ul> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#disable-melding"
      class="nav-link"
      >Disable-melding</a
    >
    </li>
  </ul> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#meldingsbygger-bibliotek"
      class="nav-link"
      >Meldingsbygger-bibliotek</a
    >
    </li>
  </ul> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#hva-er-sensitivitet"
      class="nav-link"
      >Hva er sensitivitet?</a
    >
    </li>
  </ul>
  </ul> 
  <ul class="toc-list-depth-2">
    <li class="toc-item toc-item-depth-2">
      <a
      href="#plassering"
      class="nav-link"
      >Plassering</a
    >
    </li> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#din-oversikt"
      class="nav-link"
      >Din oversikt</a
    >
    </li> 
  </ul> 
  <ul class="toc-list-depth-3">
    <li class="toc-item toc-item-depth-3">
      <a
      href="#kanskje-aktuelt-for-deg"
      class="nav-link"
      >Kanskje aktuelt for deg</a
    >
    </li>
  </ul>
  </ul>
  </ul>
</div>
    </div>
    
</div>
            </div>
        </div>

        <footer class="col-md-12">
<section class="footer-wrapper">
    <h2 id="slack">Min side på slack</h2>
    <a href="https://nav-it.slack.com/archives/C9CJ794PP">#team-personbruker</a>
    <a href="https://nav-it.slack.com/archives/CR61BPH7G">#brukernotifikasjoner</a>
    <a href="https://nav-it.slack.com/archives/C04E3K5MMMY">#utkast</a>
</section>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../scripts/override_navbar-background.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Søk</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Lukk"></button>
            </div>
            <div class="modal-body">
                <p>Her kan du søke i disse dokumentene. Skriv søketeksten nedenfor.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Søk ..." id="mkdocs-search-query" title="Skriv søketeksten her">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="Fant ingen resultater"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Tastatursnarveier</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Lukk"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Taster</th>
                    <th>Handling</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Åpne denne hjelpen</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Neste side</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Forrige side</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Søk</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
